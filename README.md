# 同济大学数字逻辑大作业:koala:
---
VS1003B+蓝牙+OLED实现的简单音乐播放器，希望能为学弟学妹提供一点力所能及的帮助

---
### 简介
如果你是刚开始接触这三个外设，下面的信息可能会对你有所帮助
* VS1003B模块：用这个模块来入门是个很不错的选择。由于我刚开始写大作业时也是一头雾水，所以我也是借鉴了一份学长的代码（虽然出处已经无从考究:sweat:），十分感谢那份代码让我入门，这也是为什么我要把自己的代码分享出来。
首先要说的是，这个模块是无法发声的，需要**连接耳机或音响**（也许你认为这是废话，但我因为这个卡了两三天:sweat_smile:）。我播放的是几首MIDI格式的音乐，将音乐转换成coe文件存储在ip核里，至于具体实现还是由你来探索吧:octocat:，要注意的是**只支持播放单音轨的midi**。事实上它也可以播放mp3格式的音乐，但是转换后的二进制文件一般都很大，不能使用ip核，所以需要解决存储问题。

* HC-06模块：蓝牙模块实际上是有一对的，HC-05负责发送，HC-06负责接收，我用这个模块来实现手机遥控（但答辩现场有人实现了HC-06发送数据）。这个模块最大的难点是实现uart协议，不过网上的资料有很多，也有verilog实现的代码，稍微简化一下就可以跑起来。手机端需要安装一个蓝牙串口调试工具来发送八位的指令，至于模块文档上的指令集我个人并没有用到。

* OLED模块：这个模块我最先参考的是某个学长的上千行代码，给我留下了很大的心理阴影:mask:。其实oled和VS1003B都是采用SPI协议，所以我模仿VS1003B的状态机实现了比较简洁的版本（前后从头写了三次，心态都崩了，同学还说我的代码写的很丑:neutral_face:）。个人感觉OLED最大的难点在于图像的生成，因为它只能接收16位的RGB像素，而我们一般都用的24位或32位，经过大量的摸索，得出的一套方法是：用PS把图片转成16位色的bmp格式（大小是64\*96，和屏幕大小保持一致），之后下载一个能以二进制格式打开图片的软件（我用的Hex Editor Neo），打开后编辑一下就可以直接用了（好像是删除前几行？记不清了）。

---
我没有提到的部分就由你来探索吧，代码很丑，望见谅，有疑问可以联系我（如果你能找到我的话）。祝你造火箭成功:rocket:！

---
请勿照抄:u7981:，虽然写大作业的过程很痛苦，但是玩明白了以后收获还是挺大的。

